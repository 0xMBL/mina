{{- $root := . -}}
{{- $index := 1 }}
{{- range $pubkey, $_ := $root.Files.Glob (printf "%s" .Values.libP2pKeys.glob) }}
{{- $privkey := trimSuffix (ext $pubkey) $pubkey }}
---
kind: Secret
apiVersion: v1
metadata:
  name: {{ include "bootstrap.fullname" $root }}-seed-{{ $index }}
  labels:
    {{- include "bootstrap.labels" $root | nindent 4 }}
data:
  key: |-
    {{ $root.Files.Get $privkey | b64enc | indent 4 }}
  pub: |-
    {{ $root.Files.Get $pubkey | b64enc | indent 4 }}
{{- $index = add1 $index }}
{{- end }}